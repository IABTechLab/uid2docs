1/2/25: Reworking the ADP diagram for six steps as discussed with AnDe. Sent to her for review but checking in these mods.

<!-- 1/7/25: updated "identity mapping service " > POST /identity/map endpoint per edits from SW. Code: 

  sequenceDiagram
    participant ADP as Advertiser/Data Provider
    participant UID as UID2 Operator
    participant DSP
    Note over ADP,DSP: 1. Generate a raw UID2 from DII.
        loop 
    ADP->>UID: 1-a. Send a request containing DII using an SDK, Snowflake, AWS Entity Resolution, or raw HTTP endpoint.
    UID->>ADP: 1-b. Receive the raw UID2 and salt bucket ID.
    end
    Note over ADP,DSP: 2. Store raw UID2s and salt bucket IDs.
    Note over ADP,DSP: 3. Manipulate or combine raw UID2s.
     Note over ADP,DSP: 4. Send raw UID2s to DSPs.
    ADP-->>DSP: Send stored raw UID2s to DSPs to create audiences and conversions, or use them for measurement.
    Note over ADP,DSP: 5. Monitor for salt bucket rotation.
    loop
       ADP->>UID: 5-a. Monitor salt bucket rotations using the bucket service.
       UID->>ADP: 5-b. Return salt buckets rotated since a specified timestamp.
       ADP->>UID: 5-c. Compare the rotated salt buckets to the stored UID2 salt buckets.<br>If rotated, resend DII to the POST /identity/map endpoint for a new raw UID2.
       UID->>ADP: 5-d. Store the raw UID2 and the salt bucket returned from the POST /identity/map endpoint.
    end
    Note over ADP,DSP: 6. Monitor for opt-out status. Remove all opt-outs from local storage and do not use.
    loop
       ADP->>UID: 6-a. Monitor for optout status using the POST optout/status endpoint.
       UID->>ADP: 6-b. Return optout status.
    end

-->

<!-- 1/7/25: URL:

https://mermaid-js.github.io/mermaid-live-editor/edit#pako:eNqNVdtu2kAQ_ZXRPjsGE0yCVUWK6qhFVVpUUlWqeFnsgaxi77p7IU2j_Htn1wachCj1C97LOTNz5gx-ZIUqkWUMwOBvh7LAXPCN5vVSAj0N11YUouHSwmU-B27gstwibRrUg5xbDnOttqJE_RrwY5Z7AP2M4FuDmlt15Fa-mLebX5VFUETuI0W0nUESwyeUHonAQfP7lmytVQ35bBa3QP9USjXQLgl9cnFBFwl_wmNYoCw92tdnLBRKWi6kkBtPAc74Ny5hkX-JYCHV_bridxjB5c8FXEkr7AN8R6MqZ4WSESgd8vh8czMHIm6UkLbLg0JSYArvA69ighUotgj2Fg-5c0rG8MrCyhV3aGGWd2gie1OHEVVB4h1ozBEeE7-JP43hmkvRuMorSSUUql4J2ePbSXkEPO4kPMS2yndth_F6U93hbrhofKpH7vvfQmNopiuFN1tbB7WEIhrS1wSBnQmi1bCmRY3cOI017nU-kmNKBSopKHDA9IXRynLfug7sjbK3Tc8qqbfKjuMY3nRW8d3sjmgGtqLAgw17DkhbB1inZZ_OtHwkD5EV3tWmwUKsBe1YUZNBed3ExxMsYvioapqdzlI7oj47SezPuhYEx_XP4w8rfTFb77ARTYXxLfOT0EHn3xY3MKCJDt4f1LzZ-zxoy0Hi_b65b9Re7gz7yvshu768QSLKNQz1Own8x6hMnjtBNfZEOWoV1euM70hN94FX1e7ItJErVfAq6MY3GDItFUhlvRnfsc6kb50u6CFmzzahsvZw0B2-qOy5jpOeh55x9nVgEatR11yU9Df-6A-WzA8PLllGr5QPmWrJlvKJbnJn1eJBFiyz2mHEtHKbW5ateWVo5ZqSXNF9AF7sXpW-vP0mhuV1-_EI35CI0d_5L6UOQFqz7JH9YdlpOolHyfhsOhkmaZKM0og9sCwdxelkOj4d09F4OkzOnyL2NxAM4_PxaJyenU-HaTJM02ny9A8dTiLz

-->

<!-- 1/2/25: Code (outdated 1/7/25): 

  sequenceDiagram
    participant ADP as Advertiser/Data Provider
    participant UID as UID2 Operator
    participant DSP
    Note over ADP,DSP: 1. Generate a raw UID2 from DII.
        loop 
    ADP->>UID: 1-a. Send a request containing DII using an SDK, Snowflake, AWS Entity Resolution, or raw HTTP endpoint.
    UID->>ADP: 1-b. Receive the raw UID2 and salt bucket ID.
    end
    Note over ADP,DSP: 2. Store raw UID2s and salt bucket IDs.
    Note over ADP,DSP: 3. Manipulate or combine raw UID2s.
     Note over ADP,DSP: 4. Send raw UID2s to DSPs.
    ADP-->>DSP: Send stored raw UID2s to DSPs to create audiences and conversions, or use them for measurement.
    Note over ADP,DSP: 5. Monitor for salt bucket rotation.
    loop
       ADP->>UID: 5-a. Monitor salt bucket rotations using the bucket service.
       UID->>ADP: 5-b. Return salt buckets rotated since a specified timestamp.
       ADP->>UID: 5-c. Compare the rotated salt buckets to the stored UID2 salt buckets.<br>If rotated, resend DII to identity mapping service for a new raw UID2.
       UID->>ADP: 5-d. Store the raw UID2 and the salt bucket returned from the identity mapping service.
    end
    Note over ADP,DSP: 6. Monitor for opt-out status. Remove all opt-outs from local storage and do not use.
    loop
       ADP->>UID: 6-a. Monitor for optout status using the POST optout/status endpoint.
       UID->>ADP: 6-b. Return optout status.
    end

-->

<!-- 1/2/25: URL:

https://mermaid-js.github.io/mermaid-live-editor/edit#pako:eNqNVW1P2zAQ_isnfw6hKU2h0YSEFrRVE1u1Mk2a-sVNrsUisTO_wBjiv-_sJG0YrbZ8Sey7516ee-w8s0KVyDIGYPCnQ1lgLvhW83olgZ6GaysK0XBp4SpfADdwVT4gbRrUpzm3HBZaPYgS9VvAt3nuAfQaw5cGNbfqgFe-XLSbn5VFUBTcZ4poO4Mkhg8oPRKBg-aPbbCNVjXk83ncAv1TKdVAuyT0yeUlORL-hMewRFl6tO_PWCiUtFxIIbc-BDjjv7iEZf4pgqVUj5uK32MEV9-XcC2tsE_wFY2qnBVKRqB0qOPj7e0CKHCjhLRdHZSSElN6n3gdE6xA8YBg73BfO6diDK8srF1xjxbmeYemYEd5GFMXRN4-jDkQx8RH8Wcx3HApGld5JqmFQtVrIQfxeioPgCcdhfvcVvmp9RjPN_UdfIOj8aUe8PfvQmMYpiuFF1vbB42EMhri1wSCnQmk1bChRY3cOI017ng-UGNKDSopKHHADInRynI_ug7shbKTzUAqqZdKH-MQ3nRS8dPsTHQGHkSBexkOFJC2CrBOy2E408YjeihY4VVtGizERtCOFTUJlNdNfLjAIob3qqaz00mqDzSMThR7WzeCoLihPX631pfzTY-N6FQYPzJ_EghK57hVfM2bxjfbdRhI5SDxcTfVI02XvVLfiD6UNeQ1cENFhtPsrcey_8cBmb6ev2rsiXI0IOrSGT-HmvyBV1VvMm3aShW8CmzxLYYySwVSWS_BfwhmOhRMl3SfcyCWxZflbWc87Yx_XRyvSZwOlPMq5pAHFrEadc1FSZf3szesmD8yuGIZfVI9JKUVW8kX8uTOquWTLFhmtcOIaeW2dyzb8MrQyjUlaaG79nuXdvO69N3tPDEsb9o_RvhxRIzu8B9K1TsfWrPsmf1i2Vk6jcfJ5Hw2HSVpkozTiD2xLB3H6XQ2OZuQaTIbJRcvEfsdAozii8l4kp5fzEZpMkrTWfLyBwLnIHs

-->

<!-- 8/30/24: Update "2. Send stored UID2s to DSPs to create audiences." > "2. Send stored UID2s to DSPs to create audiences and conversions." (2242) -->
<!-- 8/14/24: update to change UID2 Service to UID2 Operator per 2503: -->

<!-- 8/30/24: Code: -->

  sequenceDiagram
    participant DP as Data Provider
    participant UID2 as UID2 Operator
    participant DSP
    loop 1. Retrieve a UID2 for DII using the identity map endpoint.
    DP->>UID2: 1-a. Send a request containing DII to the identity mapping endpoints.
    UID2->>DP: 1-b. Store the raw UID2 and salt bucket returned from the identity mapping service.
    end
    DP-->>DSP: 2. Send stored UID2s to DSPs to create audiences and conversions.

    loop 3. Monitor for salt bucket rotations related to your stored raw UID2s.
       DP->>UID2: 3-a. Monitor salt bucket rotations using the bucket service.
       UID2->>DP: 3-b. Return salt buckets rotated since a specified timestamp.
       DP->>UID2: 3-c. Compare the rotated salt buckets to the stored UID2 salt buckets.<br>If rotated, resend DII to identity mapping service for a new raw UID2.
       UID2->>DP: 3-d. Store the raw UID2 and the salt bucket returned from the identity mapping service.
    end

<!-- Config:

{
  "theme": "forest"
}
 -->

<!--  8/30/24: URL with "Pan & Zoom" on:

https://mermaid-js.github.io/mermaid-live-editor/edit#pako:eNqlVMGO2jAQ_ZWRz9mIhISFqOLS9MBhVbSol4qLiQfWKrFT22FLEf_esZOwoIVTuQRnZt5782biE6u0QFYwAIu_W1QVlpLvDK_XCujXcONkJRuuHJRL4BZK7jgsjT5IgeZz0o9Fmfq08PzeoOFO30krV8vu5V7rBpIYXtEZiQcE3pVutYFysYDWSrUD94ZAfMpJd4SaN4BKNFoqF3co5fJpPvd1BSRPPIYVxQnJ-Jasg0orx6XySB7T6U-AjY8NoLZH9YCEWy496oZQqRUMpYa_950Sj-V7B5u2-oWOGF1rFArYGl3fZ7FoDrLCnoM4Ly14rhWRpX0D1vOJQGS9aAqGZ2WQO3KqFdIPzAYV1OMBjZVaeflX5o5jeNFKElYw9Uatdtz5CtK9J0jh0Y-6NQP10OfgyK3VY2_1gH0f92N8fei2-1uTx97k1-DgNZzt8EgOgVV-Q2yDldxKr1fWNGBeNw8EVjF81TVtXj-3AegavV-HK7dv4vGXjZkvtkNtRF5ZP51-kx7NN5jNQeH7xcUHTYuHmxVk_fd2sYjVaGouBX3nJx9YM6qtcc0K-ks6ycI1W6szZfLW6dVRVaxwpsWIGd3u3lix5XtLp7YR5EF_Qwwp3ctvwq_BJRPD8aW7XMIdEzH68n9qfamjIytO7A8rxvkkTpPseTYZJXmSpHnEjqzI0zifzLJxRqFsNkqm54j9DfWjeJqlWf48nY3yZJTns-T8D5qfkDg

-->

<!--  8/14/24: URL with "Pan & Zoom" on:

https://mermaid-js.github.io/mermaid-live-editor/edit#pako:eNqllMGS2jAMhl9F43M2Q0LCQqbDpemBw06ZZXrpcDGxYD0ldmo7bCnDu1c2CSVdODWXxJb1Sfql-MQqLZAVDMDizxZVhaXkO8PrtQJ6Gm6crGTDlYNyCdxCyR2HpdEHKdB8PPRtUab-WHh_bdBwp-8cK1fLy-Ze6waSGF7RGYkHBH5x3WoD5WIBrZVqB-4NgeIpJ90Rat4AKtFoqVx8oZTLp_nc-xWQPPEYVmQnkvElWQeVVo5L5Ume6fQHYONtPdR2VA8kbrn01A1RqRQMroa_d5VSHMv3DjZt9QMdRXStUShga3R9P4pFc5AVdjEo5rUEH2tFwdKuAOvjiRDI-qTJGN6VQe5IqVZI3zCf7o2Y4xhetJLkG0QcZKcdd1IrS3nuCSE87ahb04fq6-oVGEo79tL27Pvcv-3qTMNqh6KOvaivQbFbnL3wKB2CVX4ibIOV3Eqfr6ypobxuHiRYxfBZ1zRpXZ960C29a_-NugN7_Glj5ott7xuRVtZ3o5ucR_0MYnNQ-H5V8UHR4uEkhbT-e5pYxGo0NZeC_uuTN6wZ-da4ZgV9Up4k4Zqt1ZlO8tbp1VFVrHCmxYgZ3e7eWLHle0urthGkQXcj_LP7Rfg5uG5iWL5cbpNwqUSMfvXvWtc9m5asOLFfrBjnkzhNsufZZJTkSZLmETuyIk_jfDLLxhmZstkomZ4j9jv4j-Jplmb583Q2ypNRns-S8x9nnYpX

-->
