

<!-- 8/14/24: update to change UID2 Service to UID2 Operator per 2503: -->

<!-- 8/14/24: Code: -->

  sequenceDiagram
    participant DP as Data Provider
    participant UID2 as UID2 Operator
    participant DSP
    loop 1. Retrieve a UID2 for DII using the identity map endpoint.
    DP->>UID2: 1-a. Send a request containing DII to the identity mapping endpoints.
    UID2->>DP: 1-b. Store the raw UID2 and salt bucket returned from the identity mapping service.
    end
    DP-->>DSP: 2. Send stored UID2s to DSPs to create audiences.

    loop 3. Monitor for salt bucket rotations related to your stored raw UID2s.
       DP->>UID2: 3-a. Monitor salt bucket rotations using the bucket service.
       UID2->>DP: 3-b. Return salt buckets rotated since a specified timestamp.
       DP->>UID2: 3-c. Compare the rotated salt buckets to the stored UID2 salt buckets.<br>If rotated, resend DII to identity mapping service for a new raw UID2.
       UID2->>DP: 3-d. Store the raw UID2 and the salt bucket returned from the identity mapping service.
    end

<!-- Config:

{
  "theme": "forest"
}
 -->

<!--  8/14/24: URL:

https://mermaid-js.github.io/mermaid-live-editor/edit#pako:eNqllMGS2jAMhl9F43M2Q0LCQqbDpemBw06ZZXrpcDGxYD0ldmo7bCnDu1c2CSVdODWXxJb1Sfql-MQqLZAVDMDizxZVhaXkO8PrtQJ6Gm6crGTDlYNyCdxCyR2HpdEHKdB8PPRtUab-WHh_bdBwp-8cK1fLy-Ze6waSGF7RGYkHBH5x3WoD5WIBrZVqB-4NgeIpJ90Rat4AKtFoqVx8oZTLp_nc-xWQPPEYVmQnkvElWQeVVo5L5Ume6fQHYONtPdR2VA8kbrn01A1RqRQMroa_d5VSHMv3DjZt9QMdRXStUShga3R9P4pFc5AVdjEo5rUEH2tFwdKuAOvjiRDI-qTJGN6VQe5IqVZI3zCf7o2Y4xhetJLkG0QcZKcdd1IrS3nuCSE87ahb04fq6-oVGEo79tL27Pvcv-3qTMNqh6KOvaivQbFbnL3wKB2CVX4ibIOV3Eqfr6ypobxuHiRYxfBZ1zRpXZ960C29a_-NugN7_Glj5ott7xuRVtZ3o5ucR_0MYnNQ-H5V8UHR4uEkhbT-e5pYxGo0NZeC_uuTN6wZ-da4ZgV9Up4k4Zqt1ZlO8tbp1VFVrHCmxYgZ3e7eWLHle0urthGkQXcj_LP7Rfg5uG5iWL5cbpNwqUSMfvXvWtc9m5asOLFfrBjnkzhNsufZZJTkSZLmETuyIk_jfDLLxhmZstkomZ4j9jv4j-Jplmb583Q2ypNRns-S8x9nnYpX

-->
