[UID2 Documentation](../../README.md) > v1 > [Integration Guides](README.md) > DSP Integration Guide

# Overview

This guide is for DSPs who transact on UID2s in the bid stream.

# Integration Steps 

The following describes the integration workflow for DSP to support UID2 as part of RTB.

There are two components for DSP integrations.
1. Decrypt UID2 tokens to use in RTB.
2. Honor user opt-outs.

![DSP Flow](https://mermaid.ink/svg/eyJjb2RlIjoiICBzZXF1ZW5jZURpYWdyYW1cbiAgICBwYXJ0aWNpcGFudCBVIGFzIFVzZXJcbiAgICBwYXJ0aWNpcGFudCBQIGFzIFB1Ymxpc2hlclxuICAgIHBhcnRpY2lwYW50IFNTUFxuICAgIHBhcnRpY2lwYW50IERTUFxuICAgIHBhcnRpY2lwYW50IFRDIGFzIFRyYW5zcGFyZW5jeSAmIENvbnRyb2wgUG9ydGFsXG4gICAgVS0-PlA6IEEgdXNlciB2aXNpdHMgYSBwdWJsaXNoZXIgYXNzZXQuXG4gICAgUC0-PlNTUDogVGhlIHB1Ymxpc2hlciBtYWtlcyBhbiBSVEIgY2FsbC5cbiAgICBTU1AtPj5EU1A6IFRoZSBTU1AgY2FsbHMgYSBEU1AgZm9yIGJpZC5cbiAgICBsb29wIDEuIFVzZSBVSUQyIFRva2VucyBpbiBSVEJcbiAgICBEU1AtPj5EU1A6IDEtYS4gRGVjcnlwdCBVSUQyIHRva2Vucy5cbiAgICBEU1AtPj5EU1A6IDEtYi4gRXhlY3V0ZSBiaWRkaW5nIGxvZ2ljLlxuICAgIGVuZFxuICAgIGxvb3AgMi4gSG9ub3IgdXNlciBvcHQtb3V0LlxuICAgIFUtPj5UQzogMi1hLiBVc2VyIG9wdHMgb3V0IHRocm91Z2ggdGhlIFRyYW5zcGFyZW5jeSBhbmQgQ29udHJvbCBwb3J0YWwuXG4gICAgVEMtPj5EU1A6IDItYi4gRFNQIGhhbmRsZXMgb3B0LW91dC5cbiAgICBlbmRcbiIsIm1lcm1haWQiOnsidGhlbWUiOiJmb3Jlc3QifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0)

## 1. Decrypt UID2 tokens to use in RTB.

| Step | SDK | Instruction |
| --- | --- | --- |
| a | [DSP SDK](../sdks/dsp-client-v1-overview.md)  | Leverage the provided SDK to decrypt incoming UID2 tokens. The response contains the `UID2` and the UID2 creation time (`established_timestamp`). DSPs are required to honor opt-out protocol for UID2s. Please see [2](#2-honor-user-opt-outs) for more information |

Leverage the provided [SDK](../sdks/dsp-client-v1-overview.md) to decrypt incoming UID2 tokens. The response contains the UID2 and the UID2 creation time (`established_timestamp`). DSPs are required to check the most recent opt-out timestamp (`optout_timestamp`) for a UID2 and honor the opt-out. The following diagram illustrates opt-out logic.

![DSP Opt Out Check](dsp-guide-optout-check-mermaid.png)

The logic for the <b>check opt-out</b> step is:
```java
if (established_timestamp < optout_timestamp) {
  // Opted out
}
```
## 2. Honor user opt-outs.

DSPs establish a pre-configured URL or endpoint for the UID2 service to send opt-outs generated by users through the Transparency and Control Portal. When the UID2 service calls the configured interface, it should record the opt-out timestamp for the corresponding UID2. 

The callback will contain the following data.

| Parameter | Description |
| --- | --- |
| `identity` | The UID2 for the user who opted out |
| `timestamp` | The time when the user opted out |


# Frequently Asked Questions
### How do I know which decryption key to apply to a UID2?
Updating decryption keys is handled automatically by the provided [DSP SDK](../sdks/dsp-client-v1-overview.md). Metadata supplied with the UID2 token discloses the timestamp of encryption, which informs which decryption key applies. 

### Where do I get the decryption keys?
The [DSP SDK](../sdks/dsp-client-v1-overview.md) library communicates with the UID2 service in the background and periodically fetches the latest keys.